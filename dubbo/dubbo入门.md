# dubbo入门

## RPC

远程方法过程调用

分为消费者和生产者，消费者使用生产者提供的服务，生产者则通过提供接口暴露自己的方法。

生产者和消费者通过注册中心进行注册，生产者将自己的方法、和服务ip端口暴露给注册中心（Map<需要的类 :List< Ip + 端口>>）。

消费者通过注册中心找的自己需要的生产者及其ip、端口，获取自己想要的方法（订阅），由于是订阅的模式，可以将生产者的相关map保存到消费者端，这样即使注册中心出现问题，也可以先通过保存的map去生产者中获取

## 分析

* 对于生产者，由于支持多种协议（http、dubbo...）所以有可能会出现一个生产者中有多个协议的现象，多个协议对应的ip:port是不同的，这样ip+port形式是不行的，那么对于注册中心中的Map集合只能使用`HashMap<类名, List<URL>>`的形式，URL类是dubbo中的类，用于替代ip+端口的方式。类名代表生产者的某个类，list代表这个类支持的URL，可以有多个
* URL：
  1. 作为传递信息的媒介，生产者、消费者都是通过这个URL进行数据传递的，而URL中的参数是可以进行修改，这样消费者可以根据自己需求来获取生产者的数据。
  2. 可以通过URL将注册服务注册到注册中心。上面的是生产者提供URL，让消费者进行消费使用的，而后者的URL是为了将前者的URL存放到注册中心。一个是给消费者看的，一个是给注册中心的
* 对于`@DubboService`注释，dubbo会对注释类生成两个bean，一个为实现类的bean，这个类就是单纯的实现类的功能，注入到容器中，供其他本类使用。另一个为接口的bean，是`ServiceBean`类，这个用来对实现类进行加工后得到的，能够通过dubbo实现一些其他方法。