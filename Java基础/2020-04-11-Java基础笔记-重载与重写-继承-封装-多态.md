[TOC]

# 重载与重写、继承封装与多态

## 一、重载与重写

### **重载（Overload）**：

+ 是同一类内部的方法之间的关系
+ 方法名必须相同，参数列表不同：参数类型不同，个数不同，顺序不同
+ 返回值和修饰符可以不同
+ 是让类以统一方式处理不同类型数据的一种手段
+ 是一种**类中**多态性的表现
+ 发生在编译时，重载式多态，也叫编译时多态

### **重写（Override）：**

* 也叫做覆盖
* 是类与类之间（父类和子类）方法的关系，父子方法的方法名、返回值类型、参数列表必须相同。
* 子类方法访问权限不能比父类中被重写的方法的访问权限更低。
* 重写方法声明异常也不可比父类更宽泛
* static和final 方法不能被重写
* 子类和父类在同一个包下，可以重写父类private和final以外的方法。
* 子类和父类不在同一个包下，只重写父类protected、public方法。
* 发生在运行时，重写式多态，也叫运行式多态

### **在虚拟机中**⭐：

* 重载在类加载时即可确定，属于静态分派
* 重写由动态类型确定，是在运行时确定，属于动态分派
* 动态分派是由虚方法表实现的，虚方法表中存在着各个方法的实际入口地址，如若父类中某个方法子类没有重写，则父类与子类的方法表中的方法地址相同，如若重写了，则子类方法表的地址指向重写后的地址；



## 二、封装、继承、重写

### 封装：

为了防止外部直接访问类的内部，将其封装起来，只留下实现操作的方法，遵循开闭原则

![Snipaste_2020-04-11_10-40-49](https://raw.githubusercontent.com/Bogdanxin/cloudImage/master/20200411105410.png)

### 继承：

* 是类与类之间的关系，子类**拥有**父类所有的方法和属性（除了private修饰的属性和方法），实现了代码复用
* 子类可以拥有自己的方法和属性，实现了对父类的拓展
* 子类可以对父类的方法进行自己的重写，实现对父类的改造
* 父类的私有属性和构造方法不能被继承

### 多态：

注意：父类引用指向子类对象

* 向上转型：

  1. 子类引用的对象转换为父类类型称为向上转型。就是子类对象转换成父类对象。
  2. 向上转换时，父类指向的子类对象会失去除了子父类共有的其他方法。即转型中，子类的所有新的方法都会消失掉。如果调用子类方法，编译时系统报找不到方法的错误
  3. 如果向上转型后，子类的方法覆盖了原来的父类方法，执行的是子类重写的方法。
  4. 子类引用不能调用父类方法。

* 向下转型：

  **向下转型就是将父类对象转换成子类对象**

  这里有三种情况：

  1. 父类引用指向的是父类对象，那么向下转型后编译不报错，但是运行会出现java.lang.ClassCastException错误。

  2. 如果父类引用指向的是子类对象1，但是向下转型是转向的子类对象2，这个也是会报错的

  3. 如果父类引用指向的是子类对象1，向下转型也是转向的子类对象1，这就不会报错了，而且转型完毕后，不仅是子父类共有的方法能够使用，子类独有的方法也能够使用，且都是重写后的方法。

